(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/myPackage/myPackage"],{"3d25":function(t,e,n){},4778:function(t,e,n){},b1b3:function(t,e,n){"use strict";var a,u=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.drawer=!1},t.e1=function(e){t.cancelShow=!1})},o=[];n.d(e,"b",function(){return u}),n.d(e,"c",function(){return o}),n.d(e,"a",function(){return a})},b63c:function(t,e,n){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u,o=n("2f62"),i=c(n("9f9e"));function c(t){return t&&t.__esModule?t:{default:t}}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),a.forEach(function(e){s(t,e,n[e])})}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=function(){return n.e("components/uni-pagination/uni-pagination").then(n.bind(null,"41a6"))},f=function(){return n.e("node-modules/@dcloudio/uni-ui/lib/uni-badge/uni-badge").then(n.bind(null,"e5b6"))},g=function(){return n.e("node-modules/@dcloudio/uni-ui/lib/uni-drawer/uni-drawer").then(n.bind(null,"e9c7"))},d=function(){return n.e("components/cmd-cell-item/cmd-cell-item").then(n.bind(null,"f4bb"))},h=function(){return n.e("components/cmd-avatar/cmd-avatar").then(n.bind(null,"6d9c"))},p=function(){return n.e("components/h-form-alert/h-form-alert").then(n.bind(null,"51cc"))},m=function(){return n.e("node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup").then(n.bind(null,"e635"))},v={computed:(0,o.mapState)(["forcedLogin","hasLogin","userName","serverUrl","user","linkList"]),data:function(){return{navlist:["已提交","待同意","待回复","被拒绝","进行中","待支付","已完成"],currentIndex:0,pages:1,dataList:[],page:{pageNum:1,pageSize:10,total:"",pageTotal:"0"},order_list:[],code:"",cancelShow:!1,classNum:{0:"",1:"",2:"",3:"",4:"",5:"",6:""},searchEntity:{status:1},entity:{},status:"",phoneStatus:{},orderPeople:{},drawer:!1,flag:!0}},components:{uniPagination:l,uniBadge:f,uniDrawer:g,cmdCelItem:d,cmdAvatar:h,hFormAlert:p,uniPopup:m},methods:r({},(0,o.mapMutations)(["setLinkList"]),(u={dateFormat:function(t,e){var n,a={"Y+":e.getFullYear().toString(),"m+":(e.getMonth()+1).toString(),"d+":e.getDate().toString(),"H+":e.getHours().toString(),"M+":e.getMinutes().toString(),"S+":e.getSeconds().toString()};for(var u in a)n=new RegExp("("+u+")").exec(t),n&&(t=t.replace(n[1],1==n[1].length?a[u]:a[u].padStart(n[1].length,"0")));return t},pay:function(e){var n=this,u={url:"/pay/getOrder"};u.data=e,i.default.postWithNoStatus(u).then(function(e){t.showToast({icon:"none",title:"请注意：由于没有商家资质，无法完整支持支付功能！故这是一个模拟过程,无论失败与否，都会当作支付成功",duration:3e3}),setTimeout(function(){t.requestPayment({provider:"alipay",orderInfo:e.data.data,success:function(t){console.log(a("success:"+JSON.stringify(t)," at pages\\myPackage\\myPackage.vue:285"))},fail:function(u){console.log(a("fail:"+JSON.stringify(u)," at pages\\myPackage\\myPackage.vue:293"));var o=e.data.message,c={url:"/pay/success",data:{orderId:o}};i.default.get(c).then(function(e){t.showToast({icon:"success",title:"支付成功"}),n.getPackageNum(),n.getDataList()},function(e){t.showToast({icon:"none",title:"支付失败"})})}}),t.showToast({icon:"success",title:"支付成功"})},3e3)},function(t){})},fnQuerenshouhuo:function(t){var e=this,n={url:"/user/userPoint/querenshouhuo"};n.data=t,i.default.post(n).then(function(t){e.getPackageNum(),e.getDataList()},function(t){})},seeCargoCode:function(t){var e=this,n={url:"/user/userPoint/getCode"};n.data=t,i.default.post(n).then(function(t){e.code=t.bk1,e.$refs.popup.open()},function(t){})},fnSetStatus1:function(t){var e=this,n={url:"/user/userPoint/updateStatus/reset"};n.data=t,i.default.post(n).then(function(t){e.getPackageNum(),e.getDataList()},function(t){})},talkTo:function(e){var n=this,a=!1,u=n.linkList,o=new Date,i=(n.dateFormat("YYYY-mm-dd HH:MM",o),{type:"chat",title:e.phone,name:e.username,url:[e.headimage],history:[],message:"",time:"",count:null,stick:!1,disabled:!1,type2:2});if(u.forEach(function(n,u){n.title==e.phone&&(t.navigateTo({url:"../HM-chat/HM-chat?id="+u}),a=!0)}),!a){u.push(i),this.setLinkList(u);var c=u.length-1;t.navigateTo({url:"../HM-chat/HM-chat?id="+c})}},seeOrderPeople:function(t){var e=this;e.drawer=!0,i.default.get({url:"/user/userPoint/getBasicInfo/"+t.id}).then(function(t){e.orderPeople=t},function(t){})},fnAgreen:function(e){var n=/^\d+$|^\d*\.\d+$/g;if(n.test(e.price)){var a=this;this.entity.money=e.price;var u={url:"/user/userPoint/updateStatus/agree"};u.data=a.entity,i.default.post(u).then(function(t){a.getPackageNum(),a.getDataList(),a.cancelShow=!1},function(t){a.cancelShow=!1})}else t.showToast({title:"只能输入数字和小数点",icon:"none"}),e.price=";"},tongyi:function(t){this.cancelShow=!0,this.entity=t},jujue:function(e){var n=this;console.log(a(e," at pages\\myPackage\\myPackage.vue:569")),t.showModal({title:"提示",content:"确认拒绝",success:function(t){if(t.confirm){var a={url:"/user/userPoint/updateStatus/reject"};a.data=e,i.default.post(a).then(function(t){n.getPackageNum(),n.getDataList()},function(t){})}else t.cancel}})},cancel:function(e){var n=this;console.log(a(e," at pages\\myPackage\\myPackage.vue:599")),t.showModal({title:"提示",content:"确认取消这个订单吗",success:function(t){if(t.confirm){var a={url:"/user/userPoint/updateStatus/cancel"};a.data=e,i.default.post(a).then(function(t){n.getPackageNum()},function(t){})}else t.cancel}})},navselect:function(t){this.searchEntity.status=0==t?1:1==t?0:t,this.currentIndex=t,this.getDataList()},goDetail:function(t){console.log(a(t," at pages\\myPackage\\myPackage.vue:644"))},paginat:function(t){this.page.pageNum=t,console.log(a(t," at pages\\myPackage\\myPackage.vue:650"))}},s(u,"goDetail",function(e){t.navigateTo({url:"../cargo/cargo/cargo?id="+e.id+"&type=1"})}),s(u,"getDataList",function(){var t="/user/userPoint/findManyWithPage",e={pageNum:this.page.pageNum,pageSize:this.page.pageSize,status:this.searchEntity.status,userId:this.user.id},n={};n.url=t,n.data=e;var u=this;i.default.get(n).then(function(t){u.page.pageTotal=t.pageCount,u.order_list=[],t.list.forEach(function(t){t.cargoImage=JSON.parse(t.cargoImage),t.cargoImage.length>2&&t.cargoImage.splice(2,1),u.order_list.push(t)})},function(t){console.log(a("失败"," at pages\\myPackage\\myPackage.vue:686"))})}),s(u,"getPackageNum",function(t){var e=this,n="/user/userPoint/query/getPackageNum",u={userId:this.user.id},o={};o.url=n,o.data=u;var c=this;i.default.get(o).then(function(n){var a=n["0"];if(n["0"]=n["1"],n["1"]=a,Object.assign(c.classNum,n),t)for(var u in c.classNum)if(0!=c.classNum[u]){e.searchEntity.status="0"==u?1:"1"==u?0:u,c.currentIndex=u,c.getDataList(),c.flag=!1;break}},function(t){console.log(a("失败："+t," at pages\\myPackage\\myPackage.vue:734"))})}),u)),mounted:function(){var e=this;t.getSystemInfo({success:function(n){e.phoneStatus=n,t.startPullDownRefresh()}})},onPullDownRefresh:function(){var e=this;setTimeout(function(){e.flag?e.getPackageNum({}):(e.getPackageNum(),e.getDataList()),t.stopPullDownRefresh()},1e3)}};e.default=v}).call(this,n("6e42")["default"],n("0de9")["default"])},d340:function(t,e,n){"use strict";n.r(e);var a=n("b63c"),u=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);e["default"]=u.a},d8d0:function(t,e,n){"use strict";n.r(e);var a=n("b1b3"),u=n("d340");for(var o in u)"default"!==o&&function(t){n.d(e,t,function(){return u[t]})}(o);n("ea12"),n("e9e9");var i,c=n("f0c5"),r=Object(c["a"])(u["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],i);e["default"]=r.exports},e9e9:function(t,e,n){"use strict";var a=n("3d25"),u=n.n(a);u.a},ea12:function(t,e,n){"use strict";var a=n("4778"),u=n.n(a);u.a},edc9:function(t,e,n){"use strict";(function(t){n("65f7"),n("921b");a(n("66fd"));var e=a(n("d8d0"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])}},[["edc9","common/runtime","common/vendor"]]]);