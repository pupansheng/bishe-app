(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/order"],{"077d":function(t,e,n){"use strict";var o=n("3a1e"),i=n.n(o);i.a},"24a4":function(t,e,n){"use strict";(function(t){n("65f7"),n("921b");o(n("66fd"));var e=o(n("e884"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},"25c5":function(t,e,n){"use strict";var o,i=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.drawer=!1})},a=[];n.d(e,"b",function(){return i}),n.d(e,"c",function(){return a}),n.d(e,"a",function(){return o})},"3a1e":function(t,e,n){},"46fc":function(t,e,n){},6777:function(t,e,n){"use strict";n.r(e);var o=n("7bd0"),i=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);e["default"]=i.a},"6ceb":function(t,e,n){"use strict";var o=n("46fc"),i=n.n(o);i.a},"7bd0":function(t,e,n){"use strict";(function(t,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n("2f62"),a=r(n("9f9e"));function r(t){return t&&t.__esModule?t:{default:t}}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){c(t,e,n[e])})}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=function(){return n.e("node-modules/@dcloudio/uni-ui/lib/uni-pagination/uni-pagination").then(n.bind(null,"7bab"))},l=function(){return n.e("node-modules/@dcloudio/uni-ui/lib/uni-badge/uni-badge").then(n.bind(null,"e5b6"))},d=function(){return n.e("node-modules/@dcloudio/uni-ui/lib/uni-drawer/uni-drawer").then(n.bind(null,"e9c7"))},f=function(){return n.e("components/cmd-cell-item/cmd-cell-item").then(n.bind(null,"f4bb"))},g=function(){return n.e("components/cmd-avatar/cmd-avatar").then(n.bind(null,"6d9c"))},p=function(){return n.e("components/h-form-alert/h-form-alert").then(n.bind(null,"51cc"))},h=function(){return n.e("node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup").then(n.bind(null,"e635"))},m={computed:(0,i.mapState)(["forcedLogin","hasLogin","userName","serverUrl","user","linkList"]),data:function(){return{navlist:["已申请","已同意","被拒绝","进行中","待支付","已完成"],currentIndex:0,pages:1,dataList:[],page:{pageNum:1,pageSize:10,total:"",pageTotal:"0"},order_list:[],drawer:!1,classNum:{0:"",1:"",2:"",3:"",4:"",5:""},searchEntity:{status:0},orderPeople:{},status:"",phoneStatus:{},flag:!0}},components:{uniPagination:s,uniBadge:l,uniDrawer:d,cmdCelItem:f,cmdAvatar:g,hFormAlert:p,uniPopup:h},methods:u({},(0,i.mapMutations)(["setLinkList"]),{dateFormat:function(t,e){var n,o={"Y+":e.getFullYear().toString(),"m+":(e.getMonth()+1).toString(),"d+":e.getDate().toString(),"H+":e.getHours().toString(),"M+":e.getMinutes().toString(),"S+":e.getSeconds().toString()};for(var i in o)n=new RegExp("("+i+")").exec(t),n&&(t=t.replace(n[1],1==n[1].length?o[i]:o[i].padStart(n[1].length,"0")));return t},seeOrderPeople:function(t){var e=this;e.drawer=!0,a.default.get({url:"/order/getBasicInfo/"+t.ownerid}).then(function(t){e.orderPeople=t},function(t){})},talkTo:function(e){var n=this,o=!1,i=n.linkList,a=new Date,r=(n.dateFormat("YYYY-mm-dd HH:MM",a),{type:"chat",title:e.phone,name:e.username,url:[e.headimage],history:[],message:"",time:"",count:null,stick:!1,disabled:!1,type2:2});if(i.forEach(function(n,i){n.title==e.phone&&(t.navigateTo({url:"../HM-chat/HM-chat?id="+i}),o=!0)}),!o){i.push(r),this.setLinkList(i);var u=i.length-1;t.navigateTo({url:"../HM-chat/HM-chat?id="+u})}},geikehu:function(e){var n=this;t.showModal({title:"提示",content:"确认操作?",success:function(t){if(t.confirm){var o={url:"/order/daohuo"};o.data=e,a.default.post(o).then(function(t){n.getOderNum(),n.getDataList()},function(t){})}else t.cancel}})},butongyi:function(e){var n=this;t.showModal({title:"提示",content:"确认取消?",success:function(t){if(t.confirm){var o={url:"/order/reject"};o.data=e,a.default.post(o).then(function(t){n.getOderNum(),n.getDataList()},function(t){})}else t.cancel}})},getCargo:function(e){var n=this;t.showModal({title:"提示",content:"确认取货? 请注意,当确认时无法更改，直到订单完成",success:function(i){if(i.confirm){var r={url:"/order/confirm"};r.data=e,a.default.post(r).then(function(e){t.showToast({icon:"success",title:"成功!取货码："+e}),console.log(o(e," at pages\\order\\order.vue:365")),n.getOderNum(),n.getDataList()},function(t){})}else i.cancel}})},cancel0:function(e){var n=this;t.showModal({title:"提示",content:"确认?",success:function(t){if(t.confirm){var o={url:"/order/delete"};o.data={id:e.id,status:e.status,userpointid:e.userpointid},a.default.post(o).then(function(t){n.getOderNum(),n.getDataList()},function(t){})}else t.cancel}})},cancelRecord:function(t){var e=this,n={url:"/order/delete"};n.data={id:t.id,status:t.status,userpointid:t.userpointid},a.default.post(n).then(function(t){e.getOderNum(),e.getDataList()},function(t){})},navselect:function(t){this.searchEntity.status=t,this.currentIndex=t,this.getDataList()},paginat:function(t){this.page.pageNum=t,console.log(o(t," at pages\\order\\order.vue:450"))},goDetail:function(e){t.navigateTo({url:"../cargo/cargo/cargo?id="+e.userpointid+"&type=1"})},getDataList:function(){var t="/order/query/condition",e={pageNum:this.page.pageNum,pageSize:this.page.pageSize,status:this.searchEntity.status,userid:this.user.id},n={};n.url=t,n.data=e;var i=this;a.default.post(n).then(function(t){i.order_list=t.list,i.order_list.forEach(function(t){t.goodsimage=JSON.parse(t.goodsimage),t.goodsimage.length>2&&t.goodsimage.splice(2,1)}),i.page.pageNum=t.pageNum,i.page.pageSize=t.pageSize,i.page.pageTotal=t.total},function(t){console.log(o("失败"," at pages\\order\\order.vue:488"))})},getOderNum:function(t){var e=this,n="/order/query/getOrderNum",i={userId:this.user.id},r={};r.url=n,r.data=i;var u=this;a.default.get(r).then(function(n){if(Object.assign(u.classNum,n),t)for(var o in u.classNum)if(0!=u.classNum[o]){u.currentIndex=o,e.searchEntity.status=o,u.flag=!1,u.getDataList();break}},function(t){console.log(o("失败"," at pages\\order\\order.vue:524"))})}}),mounted:function(){var e=this;t.getSystemInfo({success:function(n){e.phoneStatus=n,t.startPullDownRefresh()}})},onPullDownRefresh:function(){var e=this;setTimeout(function(){e.flag?e.getOderNum({}):(e.getOderNum(),e.getDataList()),t.stopPullDownRefresh()},1e3)}};e.default=m}).call(this,n("6e42")["default"],n("0de9")["default"])},e884:function(t,e,n){"use strict";n.r(e);var o=n("25c5"),i=n("6777");for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);n("6ceb"),n("077d");var r,u=n("f0c5"),c=Object(u["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);e["default"]=c.exports}},[["24a4","common/runtime","common/vendor"]]]);