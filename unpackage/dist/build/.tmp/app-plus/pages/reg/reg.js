(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/reg/reg"],{"0db8":function(e,t,n){"use strict";(function(e){n("65f7"),n("921b");o(n("66fd"));var t=o(n("1d74"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},"1b63":function(e,t,n){},"1d74":function(e,t,n){"use strict";n.r(t);var o=n("4c18"),i=n("e86a");for(var r in i)"default"!==r&&function(e){n.d(t,e,function(){return i[e]})}(r);n("9868");var s,a=n("f0c5"),u=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=u.exports},"4c18":function(e,t,n){"use strict";var o,i=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){!e.safety.state&&e.fnGetPhoneCode()})},r=[];n.d(t,"b",function(){return i}),n.d(t,"c",function(){return r}),n.d(t,"a",function(){return o})},9868:function(e,t,n){"use strict";var o=n("1b63"),i=n.n(o);i.a},d445:function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("2f62"),r=s(n("9f9e"));function s(e){return e&&e.__esModule?e:{default:e}}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){u(e,t,n[t])})}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(){return n.e("components/cmd-nav-bar/cmd-nav-bar").then(n.bind(null,"36f6"))},l=function(){return n.e("components/cmd-page-body/cmd-page-body").then(n.bind(null,"7d7d"))},f=function(){return n.e("components/cmd-transition/cmd-transition").then(n.bind(null,"626f"))},d=function(){return n.e("components/cmd-input/cmd-input").then(n.bind(null,"3dc4"))},h={components:{cmdNavBar:c,cmdPageBody:l,cmdTransition:f,cmdInput:d},computed:a({},(0,i.mapState)(["serverUrl"])),data:function(){return{account:{username:"",password:""},usernameReg:/^[A-Za-z0-9]+$/,passwordReg:/^\w+$/,registerAccount:!1,mobile:{phone:"",code:""},phoneReg:/^[1](([3][0-9])|([4][5-9])|([5][0-3,5-9])|([6][5,6])|([7][0-8])|([8][0-9])|([9][1,8,9]))[0-9]{8}$/,registerMobile:!1,safety:{time:60,state:!1,interval:""},status:!0}},watch:{mobile:{handler:function(e){this.phoneReg.test(e.phone)&&6===e.code.length?this.registerMobile=!0:this.registerMobile=!1},deep:!0},account:{handler:function(e){this.usernameReg.test(e.username)&&e.username.length>=8&&this.passwordReg.test(e.password)&&e.password.length>=8?this.registerAccount=!0:this.registerAccount=!1},deep:!0}},methods:{gotoLogin:function(){e.navigateTo({url:"../login/login"})},fnRegister:function(){if(this.status){console.log(o(JSON.stringify(this.mobile)," at pages\\reg\\reg.vue:140"));var t={};t.username=this.mobile.phone,t.password=this.mobile.code,t.phone=this.mobile.phone,t.usertype=1;var n=this;r.default.post({url:"/user/register/"+n.mobile.code,data:t}).then(function(e){n.$helper.toast("none","注册成功！初始密码为验证码,用户名为你的手机号,可以前往个人中心修改",2e3,!1,"bottom"),setTimeout(function(){n.gotoLogin()},2e3)},function(t){e.showToast({icon:"none",title:"注册失败:"+t})})}else console.log(o(JSON.stringify(this.account)," at pages\\reg\\reg.vue:196"))},fnGetPhoneCode:function(){var t=this;if(this.phoneReg.test(this.mobile.phone)){var n={};n.url="/message/getYanzhengma/"+this.mobile.phone+"/register",r.default.get(n).then(function(n){e.showToast({icon:"none",title:"发送成功"}),t.safety.state=!0,t.safety.interval=setInterval(function(){t.safety.time--<=0&&(t.safety.time=60,t.safety.state=!1,clearInterval(t.safety.interval))},1e3)},function(t){e.showToast({title:"获取验证码失败",icon:"none"})})}else e.showToast({title:"手机号不正确",icon:"none"})},fnChangeStatus:function(){this.mobile={phone:"",code:""},this.registerAccount=!1,this.account={username:"",password:""},this.registerMobile=!1,clearInterval(this.safety.interval),this.safety.time=60,this.safety.state=!1,this.status=!this.status}},beforeDestroy:function(){clearInterval(this.safety.interval)}};t.default=h}).call(this,n("6e42")["default"],n("0de9")["default"])},e86a:function(e,t,n){"use strict";n.r(t);var o=n("d445"),i=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);t["default"]=i.a}},[["0db8","common/runtime","common/vendor"]]]);